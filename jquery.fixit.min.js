/**
 * fixit 1.0
 * https://github.com/lastdates/fixit
 */
(function(e){var t=e(window),n=0,r=-1,i=0,s=0,o=0,u,a=[],f=[],l=e(),c=function(){var e=t.scrollTop()+s;r=e>n?1:-1;n=e;for(var o=0;o<f.length;o++){if(f[o]["T"]-f[o].t+s-i<=n){if(f[o].e.css("position")!="fixed"){s+=f[o].e.outerHeight();u-=f[o].e.outerHeight()}f[o].e.css({position:"fixed",top:f[o].t+i+"px"})}else{if(f[o].e.css("position")=="fixed"){s-=f[o].e.outerHeight();u+=f[o].e.outerHeight()}f[o].e.css({position:"static"})}}for(var o=0;o<a.length;o++){if(a[o].T>n){a[o].y=a[o].t}else if(u>a[o]["h"]){if(a[o].T+a[o].H-a[o].h<n){a[o].y=a[o].H-a[o].h+a[o].t}else{a[o].y=n-a[o].T+a[o].t}}else if(a[o].T+a[o].H-u<n){a[o].y=a[o].H-a[o].h+a[o].t}else if(r==1){if(a[o].T+a[o].h+a[o].y-u-a[o].t<n)a[o].y=n+u-a[o].T-a[o].h+a[o].t}else{if(a[o].y==0||a[o].T+a[o].y>n)a[o].y=n-a[o].T+a[o].t}a[o].e.css({"margin-top":a[o].y+"px"})}l.css({"margin-top":s+"px"})},h=function(){n=t.scrollTop()+s;u=t.height()-s-o;for(var e=0;e<a.length;e++){if(a[e].e){a[e]["T"]=a[e].e.parent().offset().top;a[e]["H"]=a[e].e.parent().height();a[e]["h"]=a[e].e.outerHeight()+a[e].t+a[e].b;a[e]["y"]=a[e].t}}for(var e=0;e<f.length;e++){if(f[e].e){f[e]["T"]=f[e].e.parent().offset().top}}c()},p=function(e){var t=document.body.clientHeight,n,r;(function i(){n=document.body.clientHeight;if(t!=n)e();t=n;r=setTimeout(i,200)})()};e.fn.fixit=function(t){if(t.t){s+=t.t;i+=t.t}if(t.b){o+=t.b}if(t.f){e.merge(a,t.f)}if(t.fx){e.merge(f,t.fx)}if(t.tL){l=l.add(t.tL)}h()};e(document).ready(function(){h();t.on("resize",h);p(h);t.scroll(c)})})(jQuery)
