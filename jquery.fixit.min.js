/**
 * fixit 1.0
 * https://github.com/lastdates/fixit
 */
(function(e){var t=e(window),n=e(document),r=0,i=-1,s=0,o=0,u=0,a,f=[],l=[],c=e(),h,p=function(){var e=t.scrollTop()+o;i=e>r?1:-1;r=e;for(var n=0;n<l.length;n++){if(l[n]["T"]-l[n].t+o-s<=r){if(l[n].e.css("position")!="fixed"){o+=l[n].e.outerHeight();a-=l[n].e.outerHeight()}l[n].e.css({position:"fixed",top:l[n].t+s+"px"})}else{if(l[n].e.css("position")=="fixed"){o-=l[n].e.outerHeight();a+=l[n].e.outerHeight()}l[n].e.css({position:"static"})}}for(var n=0;n<f.length;n++){if(f[n].T>r){f[n].y=f[n].t}else if(a>f[n]["h"]){if(f[n].T+f[n].H-f[n].h<r){f[n].y=f[n].H-f[n].h+f[n].t}else{f[n].y=r-f[n].T+f[n].t}}else if(f[n].T+f[n].H-a<r){f[n].y=f[n].H-f[n].h+f[n].t}else if(i==1){if(f[n].T+f[n].h+f[n].y-a-f[n].t<r)f[n].y=r+a-f[n].T-f[n].h+f[n].t}else{if(f[n].y==0||f[n].T+f[n].y>r)f[n].y=r-f[n].T+f[n].t}f[n].e.css({"margin-top":f[n].y+"px"})}c.css({"margin-top":o+"px"})},d=function(){a=t.height()-o-u;for(var n=0;n<f.length;n++){if(f[n].e){f[n]=e.extend({t:0,b:0,P:0,T:0,H:0,h:0,y:0},f[n]);f[n].T=f[n].e.parent().offset().top+f[n].P;f[n].H=f[n].e.parent().height();f[n].h=f[n].e.outerHeight()+f[n].t+f[n].b}}for(var n=0;n<l.length;n++){if(l[n].e){l[n]=e.extend({t:0,P:0,T:0},l[n]);l[n].T=l[n].e.parent().offset().top+l[n].P}}p()},v=function(){for(var e=0;e<f.length;e++){if(f[e].e){if(f[e].e.parent().offset().top+f[e].P!=f[e].T||f[e].e.parent().height()!=f[e].H||f[e].e.outerHeight()+f[e].t+f[e].b!=f[e].h){d();break}}}for(var e=0;e<l.length;e++){if(l[e].e){if(l[e].e.parent().offset().top+l[e].P!=l[e].T){d();break}}}h=setTimeout(v,30)};e.fn.fixit=function(t){if(t){if(t.t){o+=t.t;s+=t.t}if(t.b){u+=t.b}if(t.f){e.merge(f,t.f)}if(t.fx){e.merge(l,t.fx)}if(t.tL){c=c.add(t.tL)}}d()};n.ready(function(){d();t.on("resize",d);v();t.scroll(p)})})(jQuery);
